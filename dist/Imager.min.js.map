{"version":3,"sources":["Imager.js"],"names":["window","document","applyEach","collection","callbackEach","i","length","new_collection","returnFn","value","noop","trueFn","debounce","fn","wait","timeout","context","this","args","arguments","clearTimeout","setTimeout","apply","Imager","elements","opts","doc","undefined","selector","viewportHeight","documentElement","clientHeight","className","fileTypeReqFormat","fileTypeReqFormatString","webp","replace","jpg","gif","createElement","src","alt","lazyloadOffset","scrollDelay","onResize","hasOwnProperty","lazyload","webpBrowserSupport","scrolled","availablePixelRatios","availableWidths","defaultWidths","onImagesReplaced","widthsMap","refreshPixelRatio","widthInterpolator","removeAttribute","createWidthsMap","devicePixelRatio","getKeys","sort","a","b","divs","add","ready","onReady","registerFeatureDetectionRunEvent","featureDetectionTest","addEvent","addEventListener","el","eventName","attachEvent","Object","keys","object","key","push","prototype","elementsOrSelector","querySelectorAll","additional","changeDivsToEmptyImages","concat","scrollCheck","self","offscreenImageCount","element","isPlaceholder","isThisElementOnScreen","clearInterval","interval","init","initialized","filterFn","registerScrollEvent","checkImagesNeedReplacing","registerResizeEvent","createGif","match","RegExp","elementClassName","getAttribute","elementWidth","cloneNode","width","setAttribute","parentNode","replaceChild","elementOffsetTop","offset","getPageOffset","offsetParent","offsetTop","images","isResizing","image","replaceImagesBasedOnScreenDimensions","imgSrc","naturalWidth","getNaturalWidth","computedWidth","determineAppropriateResolution","changeImageSrcToUseNewImageDimensions","replaceImagesBasedOnMissingWebpSupport","getClosestValue","clientWidth","getPixelRatio","selectedWidth","transforms","pixelRatio","widths","interpolator","map","baseValue","candidates","parseFloat","Image","addResult","event","type","dispatchEvent","featureDetectionRunEvent","removeEventListener","initFn","onerror","onload","CustomEvent","params","bubbles","cancelable","detail","evt","createEvent","initCustomEvent","Event","addCustomEvent","setInterval","getPageOffsetGenerator","testCase","pageYOffset","scrollTop","imageCopy","call","module","exports","define","amd"],"mappings":"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"}